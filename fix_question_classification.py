#!/usr/bin/env python3
"""
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –∑–∞–ø—Ä–µ—Ç –Ω–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
"""

import json
import re

def fix_question_classification():
    """–ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ instruction.json"""

    # 1. –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª
    with open('data/instruction.json', 'r', encoding='utf-8') as f:
        data = json.load(f)

    instruction = data['system_instruction']

    # ============================================================================
    # –ò–ó–ú–ï–ù–ï–ù–ò–ï 1: –î–æ–±–∞–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–µ—Ç –Ω–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –≤ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê
    # ============================================================================

    # –ù–∞—Ö–æ–¥–∏–º –∫–æ–Ω–µ—Ü —Ä–∞–∑–¥–µ–ª–∞ "–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê" (–ø–æ—Å–ª–µ –ø—Ä–∞–≤–∏–ª–∞ 3)
    pattern_critical = r'(### 3\. –ê–ù–ê–õ–ò–ó –ö–û–ù–¢–ï–ö–°–¢–ê –ú–û–ó–ì–û–†–ò–¢–ú–ê \(–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!\).*?\*\*–ü–†–ê–í–ò–õ–û:\*\* –ö–∞–∂–¥—ã–π –ø—Ä–∏–º–µ—Ä "–µ—Å–ª–∏ –±—ã —è —Ö–æ—Ç—è –±—ã" –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–æ–≤–∞/—Å–∏—Ç—É–∞—Ü–∏–∏ –∏–∑ –ø—É–Ω–∫—Ç–æ–≤ 1-2 —É—á–µ–Ω–∏—Ü—ã!\n\n)'

    new_rule_4 = """### 4. –ó–ê–ü–†–ï–¢ –ù–ê –ü–†–ò–í–ï–¢–°–¢–í–ò–Ø –í–†–ï–ú–ï–ù–ò –°–£–¢–û–ö

‚ùå **–°–¢–†–û–ì–û –ó–ê–ü–†–ï–©–ï–ù–û** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è:
- "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ"
- "–î–æ–±—Ä—ã–π –¥–µ–Ω—å"
- "–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä"
- "–î–æ–±—Ä–æ–π –Ω–æ—á–∏"
- "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ"
- "–ü—Ä–∏–≤–µ—Ç"

‚úÖ **–í–ú–ï–°–¢–û** –∏—Å–ø–æ–ª—å–∑—É–π:
- "[–ò–º—è], —Å–ø–∞—Å–∏–±–æ –∑–∞ –≤–æ–ø—Ä–æ—Å ‚ú®" (–¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤)
- "[–ò–º—è], –±–ª–∞–≥–æ–¥–∞—Ä—é –∑–∞ –º–æ–∑–≥–æ—Ä–∏—Ç–º üå∏" (–¥–ª—è –º–æ–∑–≥–æ—Ä–∏—Ç–º–æ–≤)
- "[–ò–º—è], —Å–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ä–∞—Å—Å–∫–∞–∑–∞–ª–∏, –∫–∞–∫ –ø—Ä–æ—à–ª–∞ –í–∞—à–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞ üå∏" (–¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫)
- "[–ò–º—è], —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –í–∞–º..." (–¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é)

‚ö†Ô∏è **–≠—Ç–æ –ø—Ä–∞–≤–∏–ª–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –í–°–ï–ú —Ç–∏–ø–∞–º –∑–∞–ø—Ä–æ—Å–æ–≤ –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π!**

"""

    if re.search(pattern_critical, instruction, re.DOTALL):
        instruction = re.sub(
            pattern_critical,
            r'\1' + new_rule_4 + '\n',
            instruction,
            count=1,
            flags=re.DOTALL
        )
        print("‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ 4 –≤ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê")
    else:
        print("‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –ø—Ä–∞–≤–∏–ª–∞ 4")

    # ============================================================================
    # –ò–ó–ú–ï–ù–ï–ù–ò–ï 2: –£–ª—É—á—à–∏—Ç—å —Ä–∞–∑–¥–µ–ª "1. –í–û–ü–†–û–°"
    # ============================================================================

    # –ó–∞–º–µ–Ω—è–µ–º –≤–µ—Å—å —Ä–∞–∑–¥–µ–ª "1. –í–û–ü–†–û–°"
    pattern_question = r'(### 1\. –í–û–ü–†–û–° \(–ø—Ä—è–º–æ–π –≤–æ–ø—Ä–æ—Å —É—á–µ–Ω–∏—Ü—ã\)\n\*\*–ü—Ä–∏–∑–Ω–∞–∫–∏:\*\* .*?\n\n‚ö†Ô∏è –ù–ï –∑–¥–æ—Ä–æ–≤–∞—Ç—å—Å—è \("–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ"\), –ù–ï –±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å –∑–∞ –º–æ–∑–≥–æ—Ä–∏—Ç–º!\n)'

    new_question_section = """### 1. –í–û–ü–†–û–° (–ø—Ä—è–º–æ–π –≤–æ–ø—Ä–æ—Å —É—á–µ–Ω–∏—Ü—ã)

**–ü—Ä–∏–∑–Ω–∞–∫–∏:**
- "?" (–≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫)
- "–∫–∞–∫", "–ø–æ—á–µ–º—É", "–º–æ–∂–Ω–æ –ª–∏", "—á—Ç–æ –¥–µ–ª–∞—Ç—å", "–∫–∞–∫–æ–π"
- "–ø–æ–¥—Å–∫–∞–∂–∏—Ç–µ", "—Å–∫–∞–∂–∏—Ç–µ", "–æ–±—ä—è—Å–Ω–∏—Ç–µ"
- "–¥–∞–π –æ—Ç–≤–µ—Ç —É—á–µ–Ω–∏—Ü–µ"

‚ö†Ô∏è **–û–¢–õ–ò–ß–ò–ï –û–¢ –ó–ê–ü–†–û–°–ê –ù–ê –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Æ:**
- **–í–û–ü–†–û–°:** "–ü–æ–¥—Å–∫–∞–∂–∏—Ç–µ, **–∫–∞–∫–æ–π** –ø—Ä–æ–ø–∏—Å–∞—Ç—å 5 —à–∞–≥?" + –æ–ø–∏—Å–∞–Ω–∞ –°–í–û–Ø —Å–∏—Ç—É–∞—Ü–∏—è ‚Üí –Ω—É–∂–µ–Ω –ü–†–Ø–ú–û–ô –û–¢–í–ï–¢ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏
- **–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:** "–°–æ—Å—Ç–∞–≤—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é, **–∫–∞–∫ –ø–∏—Å–∞—Ç—å** 5 —à–∞–≥" + –ù–ï–¢ —Å–≤–æ–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏ ‚Üí –Ω—É–∂–Ω–∞ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –≤ —Ñ–æ—Ä–º–∞—Ç–µ "—Ä–µ–∫–æ–º–µ–Ω–¥—É—é –í–∞–º –ø—Ä–æ–ø–∏—Å–∞—Ç—å..."

**–ï—Å–ª–∏ —É—á–µ–Ω–∏—Ü–∞:**
- –û–ø–∏—Å–∞–ª–∞ –°–í–û–Æ —Å–∏—Ç—É–∞—Ü–∏—é (—Ä–æ–¥–∏—Ç–µ–ª–∏, –ø–∞—Ä—Ç–Ω—ë—Ä, –ø—Ä–æ–±–ª–µ–º–∞)
- –ò —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç "–ø–æ–¥—Å–∫–∞–∂–∏—Ç–µ, –ö–ê–ö–û–ô –ø—Ä–æ–ø–∏—Å–∞—Ç—å [–ø—É–Ω–∫—Ç]"
- –ò–ª–∏ "–∫–∞–∫ –Ω–∞–ø–∏—Å–∞—Ç—å [–ø—É–Ω–∫—Ç] –≤ –º–æ–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏"
‚Üí **–≠—Ç–æ –í–û–ü–†–û–°!** –î–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –µ—ë —Å–∏—Ç—É–∞—Ü–∏–∏.

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:**
"[–ò–º—è], —Å–ø–∞—Å–∏–±–æ –∑–∞ –≤–æ–ø—Ä–æ—Å ‚ú®"
[–ü—Ä—è–º–æ–π –æ—Ç–≤–µ—Ç —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –¥–ª—è –µ—ë —Å–∏—Ç—É–∞—Ü–∏–∏]

‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** –ù–ï –∑–¥–æ—Ä–æ–≤–∞—Ç—å—Å—è ("–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ", "–î–æ–±—Ä—ã–π –¥–µ–Ω—å", "–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä")!
‚ö†Ô∏è –ù–ï –±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å –∑–∞ –º–æ–∑–≥–æ—Ä–∏—Ç–º!

"""

    if re.search(pattern_question, instruction, re.DOTALL):
        instruction = re.sub(
            pattern_question,
            new_question_section,
            instruction,
            count=1,
            flags=re.DOTALL
        )
        print("‚úÖ –£–ª—É—á—à–µ–Ω —Ä–∞–∑–¥–µ–ª '1. –í–û–ü–†–û–°'")
    else:
        print("‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ –í–û–ü–†–û–°")

    # ============================================================================
    # –ò–ó–ú–ï–ù–ï–ù–ò–ï 3: –£—Ç–æ—á–Ω–∏—Ç—å —Ä–∞–∑–¥–µ–ª "4. –ó–ê–ü–†–û–° –ù–ê –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Æ"
    # ============================================================================

    pattern_recommendation = r'(### 4\. –ó–ê–ü–†–û–° –ù–ê –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Æ –ü–û –ù–ê–ü–ò–°–ê–ù–ò–Æ\n\*\*–ü—Ä–∏–∑–Ω–∞–∫–∏:\*\* .*?\n\n‚ö†Ô∏è \*\*–í–ê–ñ–ù–û:\*\* –î–∞—ë–º –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Æ –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é, –ù–ï –ø–∏—à–µ–º –º–æ–∑–≥–æ—Ä–∏—Ç–º —Å–∞–º–∏!\n‚ö†Ô∏è \*\*–í–ê–ñ–ù–û:\*\* –í—Å–µ –ø—É–Ω–∫—Ç—ã —Å –ú–ê–õ–ï–ù–¨–ö–û–ô –±—É–∫–≤—ã –ø–æ—Å–ª–µ –¥–µ—Ñ–∏—Å–∞!\n)'

    new_recommendation_section = """### 4. –ó–ê–ü–†–û–° –ù–ê –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Æ –ü–û –ù–ê–ü–ò–°–ê–ù–ò–Æ

**–ü—Ä–∏–∑–Ω–∞–∫–∏:**
- "—Å–æ—Å—Ç–∞–≤—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é"
- "–ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∑–∞–ø—Ä–æ—Å –∏ —Å–æ—Å—Ç–∞–≤—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é"
- "–¥–∞–π –æ–±—â—É—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –∫–∞–∫ –ø–∏—Å–∞—Ç—å [—Ç–∏–ø –º–æ–∑–≥–æ—Ä–∏—Ç–º–∞]"
- **–ù–ï–¢ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ —É—á–µ–Ω–∏—Ü—ã** (–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å)

‚ö†Ô∏è **–û–¢–õ–ò–ß–ò–ï –û–¢ –í–û–ü–†–û–°–ê:**
- **–ï—Å–ª–∏ —É—á–µ–Ω–∏—Ü–∞ –æ–ø–∏—Å–∞–ª–∞ –°–í–û–Æ —Å–∏—Ç—É–∞—Ü–∏—é** –∏ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç "–ø–æ–¥—Å–∫–∞–∂–∏—Ç–µ, –∫–∞–∫–æ–π –ø—Ä–æ–ø–∏—Å–∞—Ç—å" ‚Üí —ç—Ç–æ **–í–û–ü–†–û–°** (–Ω—É–∂–Ω—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –µ—ë —Å–∏—Ç—É–∞—Ü–∏–∏)!
- **–ï—Å–ª–∏ —É—á–µ–Ω–∏—Ü–∞ –ù–ï –æ–ø–∏—Å–∞–ª–∞ —Å–∏—Ç—É–∞—Ü–∏—é** –∏ –ø—Ä–æ—Å–∏—Ç "—Å–æ—Å—Ç–∞–≤—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –∫–∞–∫ –ø–∏—Å–∞—Ç—å" ‚Üí —ç—Ç–æ **–ó–ê–ü–†–û–° –ù–ê –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Æ** (–Ω—É–∂–Ω–∞ –æ–±—â–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è)!

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:**
"[–ò–º—è], —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –í–∞–º –ø—Ä–æ–ø–∏—Å–∞—Ç—å [—Ç–∏–ø –º–æ–∑–≥–æ—Ä–∏—Ç–º–∞] –≤ —Å–ª–µ–¥—É—é—â–µ–º –∫–ª—é—á–µ:

- –∫–∞–∫ –í—ã –º–æ–≥–ª–∏ –±—ã [–¥–µ–π—Å—Ç–≤–∏–µ];
- –∫–∞–∫ –±—ã –í—ã —Ö–æ—Ç–µ–ª–∏ [–¥–µ–π—Å—Ç–≤–∏–µ];
- –∫–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –±—ã –í—ã –º–æ–≥–ª–∏ [–¥–µ–π—Å—Ç–≤–∏–µ];
–∏ —Ç–∞–∫ –¥–∞–ª–µ–µ."

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –î–∞—ë–º –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Æ –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é, –ù–ï –ø–∏—à–µ–º –º–æ–∑–≥–æ—Ä–∏—Ç–º —Å–∞–º–∏!
‚ö†Ô∏è **–í–ê–ñ–ù–û:** –í—Å–µ –ø—É–Ω–∫—Ç—ã —Å –ú–ê–õ–ï–ù–¨–ö–û–ô –±—É–∫–≤—ã –ø–æ—Å–ª–µ –¥–µ—Ñ–∏—Å–∞!

"""

    if re.search(pattern_recommendation, instruction, re.DOTALL):
        instruction = re.sub(
            pattern_recommendation,
            new_recommendation_section,
            instruction,
            count=1,
            flags=re.DOTALL
        )
        print("‚úÖ –£—Ç–æ—á–Ω–µ–Ω —Ä–∞–∑–¥–µ–ª '4. –ó–ê–ü–†–û–° –ù–ê –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Æ'")
    else:
        print("‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ –ó–ê–ü–†–û–° –ù–ê –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Æ")

    # ============================================================================
    # –ò–ó–ú–ï–ù–ï–ù–ò–ï 4: –£—Å–∏–ª–∏—Ç—å —Ä–∞–∑–¥–µ–ª "–û—Ç–≤–µ—Ç –Ω–∞ –í–û–ü–†–û–°"
    # ============================================================================

    pattern_answer_question = r'(### –û—Ç–≤–µ—Ç –Ω–∞ –í–û–ü–†–û–°\n\n1\. "\[–ò–º—è\], –æ—Ç–≤–µ—á–∞—é –Ω–∞ –í–∞—à –≤–æ–ø—Ä–æ—Å üå∏"\n2\. –ü—Ä—è–º–æ–π –æ—Ç–≤–µ—Ç \(150-400 —Å–∏–º–≤–æ–ª–æ–≤\)\n3\. –°—Å—ã–ª–∫–∞ –Ω–∞ —É—Ä–æ–∫ \(–µ—Å–ª–∏ —É–º–µ—Å—Ç–Ω–æ\): "–ü–æ–¥—Ä–æ–±–Ω–µ–µ –≤ –£—Ä–æ–∫–µ \[N\]\."\n)'

    new_answer_question_section = """### –û—Ç–≤–µ—Ç –Ω–∞ –í–û–ü–†–û–°

**–®–ê–ì 1: –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å**
"[–ò–º—è], —Å–ø–∞—Å–∏–±–æ –∑–∞ –≤–æ–ø—Ä–æ—Å ‚ú®"

‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** –ù–ï –∑–¥–æ—Ä–æ–≤–∞—Ç—å—Å—è ("–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ/–¥–µ–Ω—å/–≤–µ—á–µ—Ä")!

**–®–ê–ì 2: –ü—Ä—è–º–æ–π –æ—Ç–≤–µ—Ç —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏**
–î–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –°–ò–¢–£–ê–¶–ò–ò —É—á–µ–Ω–∏—Ü—ã (150-400 —Å–∏–º–≤–æ–ª–æ–≤).

**–ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –ø—Ä–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—É–Ω–∫—Ç –º–æ–∑–≥–æ—Ä–∏—Ç–º–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–∫–∞–∫–æ–π –ø—Ä–æ–ø–∏—Å–∞—Ç—å 5 —à–∞–≥"):

1. –ò–∑–≤–ª–µ–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –≤–æ–ø—Ä–æ—Å–∞ —É—á–µ–Ω–∏—Ü—ã (–ª—é–¥–∏, —Å–∏—Ç—É–∞—Ü–∏—è, –ø—Ä–æ–±–ª–µ–º–∞)
2. –î–∞–π 3-4 –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–æ–∫
3. –û–ø–∏—Ä–∞–π—Å—è –Ω–∞ –µ—ë —Å–∏—Ç—É–∞—Ü–∏—é (–∏—Å–ø–æ–ª—å–∑—É–π —Å–ª–æ–≤–∞, –ª—é–¥–µ–π, –¥–µ–π—Å—Ç–≤–∏—è –∏–∑ –≤–æ–ø—Ä–æ—Å–∞)

**–§–æ—Ä–º–∞—Ç:**
"–í [N] –ø—É–Ω–∫—Ç–µ –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å:

- [–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏–∑ –µ—ë —Å–∏—Ç—É–∞—Ü–∏–∏];
- [–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏–∑ –µ—ë —Å–∏—Ç—É–∞—Ü–∏–∏];
- [–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏–∑ –µ—ë —Å–∏—Ç—É–∞—Ü–∏–∏].

–∏ —Ç–∞–∫ –¥–∞–ª–µ–µ."

**–ü–†–ò–ú–ï–†:**

–í–æ–ø—Ä–æ—Å: "–ü–æ–¥—Å–∫–∞–∂–∏—Ç–µ, –∫–∞–∫–æ–π –ø—Ä–æ–ø–∏—Å–∞—Ç—å 5 —à–∞–≥, –µ—Å–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª–∏ –≤—ã—Ä–∞–±–æ—Ç–∞–ª–∏ –≤–æ –º–Ω–µ –∂–µ—Ä—Ç–≤—É?"

–û—Ç–≤–µ—Ç:
"[–ò–º—è], —Å–ø–∞—Å–∏–±–æ –∑–∞ –≤–æ–ø—Ä–æ—Å ‚ú®

–í 5 –ø—É–Ω–∫—Ç–µ –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å:

- –µ—Å–ª–∏ –±—ã —è —Ö–æ—Ç—è –±—ã –æ—Å–æ–∑–Ω–∞–ª–∞, —á—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª–µ–π —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª–æ –≤–æ –º–Ω–µ —Ä–æ–ª—å –∂–µ—Ä—Ç–≤—ã;
- –µ—Å–ª–∏ –±—ã —è —Ö–æ—Ç—è –±—ã –ø–µ—Ä–µ—Å—Ç–∞–ª–∞ –≤–∏–Ω–∏—Ç—å —Å–µ–±—è –∑–∞ —Ç–æ, —á—Ç–æ –æ–Ω–∏ –≤—ã—Ä–∞–±–æ—Ç–∞–ª–∏;
- –µ—Å–ª–∏ –±—ã —è —Ö–æ—Ç—è –±—ã –ø–æ–Ω—è–ª–∞, —á—Ç–æ –º–æ–≥—É –∏–∑–º–µ–Ω–∏—Ç—å —ç—Ç—É —Ä–æ–ª—å —Å–µ–π—á–∞—Å;
- –µ—Å–ª–∏ –±—ã —è —Ö–æ—Ç—è –±—ã –ø–µ—Ä–µ—Å—Ç–∞–ª–∞ —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è –∂–µ—Ä—Ç–≤–æ–π –∏—Ö –ø–æ–≤–µ–¥–µ–Ω–∏—è.

–∏ —Ç–∞–∫ –¥–∞–ª–µ–µ."

**–®–ê–ì 3: –°—Å—ã–ª–∫–∞ –Ω–∞ —É—Ä–æ–∫ (–µ—Å–ª–∏ —É–º–µ—Å—Ç–Ω–æ)**
"–ü–æ–¥—Ä–æ–±–Ω–µ–µ –≤ –£—Ä–æ–∫–µ [N]."

"""

    if re.search(pattern_answer_question, instruction, re.DOTALL):
        instruction = re.sub(
            pattern_answer_question,
            new_answer_question_section,
            instruction,
            count=1,
            flags=re.DOTALL
        )
        print("‚úÖ –£—Å–∏–ª–µ–Ω —Ä–∞–∑–¥–µ–ª '–û—Ç–≤–µ—Ç –Ω–∞ –í–û–ü–†–û–°'")
    else:
        print("‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ '–û—Ç–≤–µ—Ç –Ω–∞ –í–û–ü–†–û–°'")

    # ============================================================================
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Ñ–∞–π–ª
    # ============================================================================

    data['system_instruction'] = instruction

    with open('data/instruction.json', 'w', encoding='utf-8') as f:
        json.dump(data, f, ensure_ascii=False, indent=2)

    print("\n‚úÖ –§–∞–π–ª data/instruction.json –æ–±–Ω–æ–≤–ª—ë–Ω")
    return True

if __name__ == '__main__':
    success = fix_question_classification()
    if success:
        print("\nüìã –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ/–∏–∑–º–µ–Ω–µ–Ω–æ:")
        print("   1. –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–µ—Ç –Ω–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –≤ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê")
        print("   2. –£–ª—É—á—à–µ–Ω —Ä–∞–∑–¥–µ–ª '1. –í–û–ü–†–û–°' —Å –æ—Ç–ª–∏—á–∏—è–º–∏ –æ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π")
        print("   3. –£—Ç–æ—á–Ω–µ–Ω —Ä–∞–∑–¥–µ–ª '4. –ó–ê–ü–†–û–° –ù–ê –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Æ' —Å –æ—Ç–ª–∏—á–∏—è–º–∏ –æ—Ç –≤–æ–ø—Ä–æ—Å–æ–≤")
        print("   4. –£—Å–∏–ª–µ–Ω —Ä–∞–∑–¥–µ–ª '–û—Ç–≤–µ—Ç –Ω–∞ –í–û–ü–†–û–°' —Å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º –∏ –ø—Ä–∏–º–µ—Ä–æ–º")
