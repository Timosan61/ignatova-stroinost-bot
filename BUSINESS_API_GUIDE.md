# ๐ฑ Telegram Business API - ะะพะปะฝะพะต ััะบะพะฒะพะดััะฒะพ

## โ ะกัะฐััั: ะะะะะขะะะข!

ะะพัะปะต ะดะพะปะณะพะน ะพัะปะฐะดะบะธ Business API ะฟะพะปะฝะพัััั ััะฝะบัะธะพะฝะฐะปะตะฝ. ะะพั ััะฟะตัะฝะพ ะพัะฒะตัะฐะตั ะฝะฐ ัะพะพะฑัะตะฝะธั ัะตัะตะท ะฒะฐั ะปะธัะฝัะน Premium ะฐะบะบะฐัะฝั.

## ๐ฏ ะกัะตะผะฐ ัะฐะฑะพัั Business API

```
โโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ
โ   ะะปะธะตะฝั    โโโโโโถโ  ะะฐั Premium     โโโโโโถโ  Telegram Bot   โ
โ             โ     โ  ะะบะบะฐัะฝั         โ     โ @textilprofi_botโ
โโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ
       โ                     โ                         โ
       โ                     โ                         โ
       โผ                     โผ                         โผ
 ะะธัะตั ัะพะพะฑัะตะฝะธะต    Business API ัะฒัะทั        Webhook ะฟะพะปััะฐะตั
 ะฒ ะปะธัะบั ะฒะฐะผ        ั ะฟะพะดะบะปััะตะฝะฝัะผ ะฑะพัะพะผ      business_message
                                                      โ
                                                      โผ
                                              โโโโโโโโโโโโโโโโ
                                              โ  AI Agent    โ
                                              โ (OpenAI+Zep) โ
                                              โโโโโโโโโโโโโโโโ
                                                      โ
                                                      โผ
โโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ
โ   ะะปะธะตะฝั    โโโโโโโ  ะะฐั Premium     โโโโโโโ  Business API   โ
โ             โ     โ  ะะบะบะฐัะฝั         โ     โ   Response      โ
โโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ
       โฒ                                               โ
       โ                                               โ
       โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
              ะะปะธะตะฝั ะฒะธะดะธั ะพัะฒะตั ะพั ะฒะฐัะตะณะพ ะธะผะตะฝะธ
```

## ๐ฅ ะฃัะฐััะฝะธะบะธ ะฟัะพัะตััะฐ

### 1. **ะะปะธะตะฝั** (ะปัะฑะพะน ะฟะพะปัะทะพะฒะฐัะตะปั Telegram)
- ะะธัะตั ัะพะพะฑัะตะฝะธะต ะฒ ะปะธัะบั ะฒะฐัะตะผั Premium ะฐะบะบะฐัะฝัั
- ะะพะปััะฐะตั ะพัะฒะตัั ะพั ะฒะฐัะตะณะพ ะธะผะตะฝะธ (ะฝะพ ะณะตะฝะตัะธััะตั ะธั ะฑะพั)
- ะะต ะทะฝะฐะตั, ััะพ ะพัะฒะตัะฐะตั ะฑะพั

### 2. **ะั** (ะฒะปะฐะดะตะปะตั Premium ะฐะบะบะฐัะฝัะฐ)
- ะะผะตะตัะต Telegram Premium ะฟะพะดะฟะธัะบั
- ะะพะดะบะปััะธะปะธ ะฑะพัะฐ ะฒ Settings โ Business โ Chatbots
- ะะพั ะพัะฒะตัะฐะตั ะพั ะฒะฐัะตะณะพ ะธะผะตะฝะธ ะฐะฒัะพะผะฐัะธัะตัะบะธ

### 3. **Telegram Bot** (@textilprofi_bot)
- ะะพะปััะฐะตั ัะพะพะฑัะตะฝะธั ัะตัะตะท webhook ะบะฐะบ `business_message`
- ะะตะฝะตัะธััะตั ัะผะฝัะต ะพัะฒะตัั ัะตัะตะท AI (OpenAI + Zep)
- ะัะฟัะฐะฒะปัะตั ะพัะฒะตัั ัะตัะตะท Business API ะพั ะฒะฐัะตะณะพ ะธะผะตะฝะธ

## ๐ง ะขะตัะฝะธัะตัะบะฐั ัะตะฐะปะธะทะฐัะธั

### ะะปััะตะฒัะต ะบะพะผะฟะพะฝะตะฝัั:

1. **Webhook ะพะฑัะฐะฑะพััะธะบ** (`webhook.py`)
   - ะัะธะฝะธะผะฐะตั business_message ัะพะฑััะธั
   - ะะทะฒะปะตะบะฐะตั business_connection_id
   - ะะฑัะฐะฑะฐััะฒะฐะตั ัะตัะตะท AI ะฐะณะตะฝัะฐ

2. **Business API ััะฝะบัะธั** (`send_business_message()`)
   ```python
   def send_business_message(chat_id, text, business_connection_id):
       # ะััะผะพะน HTTP ะทะฐะฟัะพั ะบ Telegram API
       # pyTelegramBotAPI ะฝะต ะฟะพะดะดะตัะถะธะฒะฐะตั business_connection_id
   ```

3. **AI Agent** (`bot/agent.py`)
   - OpenAI ะดะปั ะณะตะฝะตัะฐัะธะธ ะพัะฒะตัะพะฒ
   - Zep ะดะปั ะฟะฐะผััะธ ะดะธะฐะปะพะณะพะฒ
   - ะะพะฝัะตะบัั ะพ ัะตะบััะธะปัะฝะพะผ ะฑะธะทะฝะตัะต

## ๐จ ะะฐะถะฝัะต ะผะพะผะตะฝัั

### ะัะพะฑะปะตะผั, ะบะพัะพััะต ะฑัะปะธ ัะตัะตะฝั:

1. **pyTelegramBotAPI ะฝะต ะฟะพะดะดะตัะถะธะฒะฐะตั Business API**
   - โ `bot.send_message(..., business_connection_id=...)`
   - โ ะััะผัะต HTTP ะทะฐะฟัะพัั ะบ Telegram API

2. **Webhook ะดะพะปะถะตะฝ ะฟะพะปััะฐัั business ัะพะฑััะธั**
   ```python
   allowed_updates=[
       "message",
       "business_connection", 
       "business_message",
       "edited_business_message",
       "deleted_business_messages"
   ]
   ```

3. **business_connection_id ะพะฑัะทะฐัะตะปะตะฝ**
   - ะัะธัะพะดะธั ะฒ ะบะฐะถะดะพะผ business_message
   - ะะพะปะถะตะฝ ะธัะฟะพะปัะทะพะฒะฐัััั ะฟัะธ ะพัะฟัะฐะฒะบะต ะพัะฒะตัะฐ

## ๐ ะะพะฝะธัะพัะธะฝะณ ะธ ะพัะปะฐะดะบะฐ

### ะะพะปะตะทะฝัะต endpoints:

1. **ะัะพะฒะตัะบะฐ ััะฐัััะฐ**
   ```
   https://bot-production-472c.up.railway.app/
   ```

2. **ะะพัะปะตะดะฝะธะต ัะพะฑััะธั**
   ```
   https://bot-production-472c.up.railway.app/debug/last-updates
   ```

3. **ะะฝัะพัะผะฐัะธั ะพ webhook**
   ```
   https://bot-production-472c.up.railway.app/webhook/info
   ```

### ะะพะณะธ ะดะปั ะพััะปะตะถะธะฒะฐะฝะธั:
- `๐จ Business message ะฟะพะปะฝะฐั ััััะบัััะฐ` - ะฒัะพะดััะตะต ัะพะพะฑัะตะฝะธะต
- `๐ ะะฐัะธะฝะฐั ะพะฑัะฐะฑะพัะบั business message` - ะฝะฐัะฐะปะพ ะพะฑัะฐะฑะพัะบะธ
- `โ Business ะพัะฒะตั ะพัะฟัะฐะฒะปะตะฝ` - ััะฟะตัะฝะฐั ะพัะฟัะฐะฒะบะฐ
- `โ ะัะธะฑะบะฐ ะพะฑัะฐะฑะพัะบะธ business ัะพะพะฑัะตะฝะธั` - ะพัะธะฑะบะธ

## ๐ฏ ะัะพะณะพะฒะฐั ะบะพะฝัะธะณััะฐัะธั

### Railway ะฟะตัะตะผะตะฝะฝัะต:
- `TELEGRAM_BOT_TOKEN` - ัะพะบะตะฝ ะฑะพัะฐ
- `OPENAI_API_KEY` - ะดะปั AI ะพัะฒะตัะพะฒ
- `ZEP_API_KEY` - ะดะปั ะฟะฐะผััะธ ะดะธะฐะปะพะณะพะฒ
- `WEBHOOK_SECRET_TOKEN` - ะฑะตะทะพะฟะฐัะฝะพััั webhook

### Telegram ะฝะฐัััะพะนะบะธ:
1. Settings โ Business โ Chatbots
2. ะัะฑะตัะธัะต @textilprofi_bot
3. ะะบะปััะธัะต "Reply to messages"
4. ะะฐัััะพะนัะต ัะฐัั ัะฐะฑะพัั (ะพะฟัะธะพะฝะฐะปัะฝะพ)

## ๐ ะะตะทัะปััะฐั

ะขะตะฟะตัั ะบะพะณะดะฐ ะบะปะธะตะฝัั ะฟะธััั ะฒะฐะผ ะฒ ะปะธัะบั:
1. ะะพั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะพะปััะฐะตั ะธั ัะพะพะฑัะตะฝะธั
2. AI ะณะตะฝะตัะธััะตั ัะผะฝัะน ะพัะฒะตั ะฟัะพ ัะตะบััะธะปั
3. ะัะฒะตั ะพัะฟัะฐะฒะปัะตััั ะพั ะฒะฐัะตะณะพ ะธะผะตะฝะธ
4. ะะปะธะตะฝั ะดัะผะฐะตั, ััะพ ั ะฝะธะผ ะพะฑัะฐะตัะตัั ะฒั

**Business API ะฟะพะปะฝะพัััั ััะฝะบัะธะพะฝะฐะปะตะฝ!**